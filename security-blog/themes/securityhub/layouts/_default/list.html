{{ define "main" }}
<div class="content-with-sidebar">
    {{ partial "sidebar.html" . }}

    <div class="main-column">
        <header class="list-header">
            <h1 class="list-title">{{ .Title }}</h1>
            {{ if .Params.description }}
            <p class="list-subtitle">{{ .Params.description }}</p>
            {{ end }}
        </header>

        {{ if .Content }}
        <div class="list-content">
            {{ .Content }}
        </div>
        {{ end }}

        <section class="posts-section">
            <div class="posts-grid">
                {{ range .Pages }}
                <article class="post-card">
                    <a href="{{ .Permalink }}">
                        <div class="post-image post-image-{{ .Params.category | default "security" }}" {{ if .Params.image }}style="background-image: linear-gradient(135deg, rgba(0,0,0,0.4), rgba(0,0,0,0.6)), url('{{ .Params.image }}'); background-size: cover; background-position: center;"{{ end }}>
                            <span class="post-icon">
                                {{ if eq .Params.category "ctf" }}🚩
                                {{ else if eq .Params.category "research" }}🔬
                                {{ else if eq .Params.category "analysis" }}🔍
                                {{ else if eq .Params.category "tutorial" }}📚
                                {{ else if eq .Params.category "writeup" }}📝
                                {{ else }}🔐{{ end }}
                            </span>
                        </div>
                        <div class="post-content">
                            <h3 class="post-title">{{ .Title }}</h3>
                            <p class="post-excerpt">{{ .Summary | truncate 120 }}</p>
                            <div class="post-meta">
                                <span class="post-date">{{ .Date.Format "Jan 2, 2006" }}</span>
                                <span class="post-category">{{ .Params.category | default "security" }}</span>
                            </div>
                        </div>
                    </a>
                </article>
                {{ end }}
            </div>
        </section>
    </div>
</div>
{{ end }}